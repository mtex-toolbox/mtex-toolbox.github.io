---
title: Shape Parameters - Basic Properties

sidebar: documentation_sidebar
permalink: ShapeParameters.html
folder: documentation
toc: false
---
<html>
<head>
<META http-equiv="Content-Type" content="text/html; charset=UTF-8">
<!--
This HTML was auto-generated from MATLAB code.
To make changes, update the MATLAB code and republish this document.
    -->
<title>Shape Parameters - Basic Properties</title>
<link rel="schema.DC" href="http://purl.org/dc/elements/1.1/">
<meta name="DC.source" content="script_ShapeParameters.m">
</head>
<body>
<font size="2"><a href="https://github.com/mtex-toolbox/mtex/blob/develop/doc/Grains/ShapeParameters.m">
    edit page</a></font>
<div>
<!--introduction-->
<!--/introduction-->
<p>In this section we discuss basic geometric properties of grains. Due to the huge amount of shape parameters we split them into different categories: basic properties (this page), <a href="EllipseBasedProperties.html">properties based on fitted ellipses</a>, <a href="HullBasedParameters.html">convex hull bases properties</a>, <a href="ProjectionBasesParameters.html">projection bases properties</a>. The table below summarizes the shape parameters discussed on this page.</p>
<p>
   <table class="usertable">
      <tr>
         <td>
               <p>
                  <tt>numPixel</tt>
               </p>
         </td>
         <td>
               <p>number of pixels per grain</p>
         </td>
         <td>
               <p>
                  <a href="grain2d.area.html">
                     <tt>area</tt>
                  </a>
               </p>
         </td>
         <td>
               <p>grain area in µm²</p>
         </td>
      </tr>
      <tr>
         <td>
               <p>
                  <a href="grain2d.boundarySize.html">
                     <tt>boundarySize</tt>
                  </a>
               </p>
         </td>
         <td>
               <p>number of boundary segments</p>
         </td>
         <td>
               <p>
                  <a href="grain2d.perimeter.html">
                     <tt>perimeter</tt>
                  </a>
               </p>
         </td>
         <td>
               <p>perimeter in µm</p>
         </td>
      </tr>
      <tr>
         <td>
               <p>
                  <a href="grain2d.subBoundarySize.html">
                     <tt>subBoundarySize</tt>
                  </a>
               </p>
         </td>
         <td>
               <p>number of inner boundaries</p>
         </td>
         <td>
               <p>
                  <a href="grain2d.subBoundarySize.html">
                     <tt>subBoundaryLength</tt>
                  </a>
               </p>
         </td>
         <td>
               <p>length of inner boundaries in µm</p>
         </td>
      </tr>
      <tr>
         <td>
               <p>
                  <a href="grain2d.diameter.html">
                     <tt>diameter</tt>
                  </a>
               </p>
         </td>
         <td>
               <p>diameter in µm</p>
         </td>
         <td>
               <p>
                  <a href="grain2d.caliper.html">
                     <tt>caliper</tt>
                  </a>
               </p>
         </td>
         <td>
               <p>caliper or Feret diameter</p>
         </td>
      </tr>
      <tr>
         <td>
               <p>
                  <a href="grain2d.equivalentPerimeter.html">
                     <tt>equivalentPerimeter</tt>
                  </a>
               </p>
         </td>
         <td>
               <p>perimeter of a circle with the same area</p>
         </td>
         <td>
               <p>
                  <a href="grain2d.equivalentRadius.html">
                     <tt>equivalentRadius</tt>
                  </a>
               </p>
         </td>
         <td>
               <p>radius of a circle with the same area</p>
         </td>
      </tr>
      <tr>
         <td>
               <p>
                  <a href="grain2d.shapeFactor.html">
                     <tt>shapeFactor</tt>
                  </a>
               </p>
         </td>
         <td>
               <p>perimeter / equivalent perimeter</p>
         </td>
         <td>
               <p>
                  <a href="grain2d.isBoundary.html">
                     <tt>isBoundary</tt>
                  </a>
               </p>
         </td>
         <td>
               <p>is it a boundary grain</p>
         </td>
      </tr>
      <tr>
         <td>
               <p>
                  <a href="IceSphericity.html">
                     <tt>sphericity</tt>
                  </a>
               </p>
         </td>
         <td>
               <p>irregularity of grain boundary</p>
         </td>
         <td>
            <text/>
         </td>
         <td>
            <text/>
         </td>
      </tr>
      <tr>
         <td>
               <p>
                  <a href="grain2d.hasHole.html">
                     <tt>hasHole</tt>
                  </a>
               </p>
         </td>
         <td>
               <p>has inclusions</p>
         </td>
         <td>
               <p>
                  <a href="grain2d.isInclusion.html">
                     <tt>isInclusion</tt>
                  </a>
               </p>
         </td>
         <td>
               <p>is an inclusions</p>
         </td>
      </tr>
      <tr>
         <td>
               <p>
                  <a href="grain2d.numNeighbors.html">
                     <tt>numNeighbors</tt>
                  </a>
               </p>
         </td>
         <td>
               <p>number neighboring grains</p>
         </td>
         <td>
               <p>
                  <a href="triplePointList.triplePointList.html">
                     <tt>triplePoints</tt>
                  </a>
               </p>
         </td>
         <td>
               <p>list of triple points</p>
         </td>
      </tr>
      <tr>
         <td>
               <p>
                  <a href="grainBoundary.grainBoundary.html">
                     <tt>boundary</tt>
                  </a>
               </p>
         </td>
         <td>
               <p>list of boundary segments</p>
         </td>
         <td>
               <p>
                  <a href="grainBoundary.grainBoundary.html">
                     <tt>innerBoundary</tt>
                  </a>
               </p>
         </td>
         <td>
               <p>subgrain boundaries</p>
         </td>
      </tr>
      <tr>
         <td>
               <p>
                  <tt>x</tt>, <tt>y</tt>
               </p>
         </td>
         <td>
               <p>coordinates of the vertices</p>
         </td>
         <td>
               <p>
                  <a href="grain2d.centroid.html">
                     <tt>centroid</tt>
                  </a>
               </p>
         </td>
         <td>
               <p>x,y coordinates of the barycenter</p>
         </td>
      </tr>
   </table>
</p>
<p>We start our discussion by reconstructing the grain structure from a sample EBSD data set.</p>
{% highlight matlab %}
% load sample EBSD data set
mtexdata forsterite silent

% restrict it to a subregion of interest.
ebsd = ebsd(inpolygon(ebsd,[5 2 10 5]*10^3));

% remove all not indexed pixels
ebsd = ebsd('indexed');

% reconstruct grains
[grains, ebsd.grainId] = calcGrains(ebsd,'angle',5*degree,'minPixel',5);

% smooth them
grains = smooth(grains,5);

% plot the orientation data of the Forsterite phase
plot(ebsd('fo'),ebsd('fo').orientations)

% plot the grain boundary on top of it
hold on
plot(grains.boundary,'lineWidth',2)
hold off
{% endhighlight %}
<center>
{% include inline_image.html file="ShapeParameters_01.png" %}
</center>
<h2 id="3">Grain size vs. grain area and boundary size vs. perimeter</h2>
<p>The most basic properties are number of pixels and grain area. Those can be computed by</p>
{% highlight matlab %}
grains(9).numPixel
grains(9).area
{% endhighlight %}

{% highlight plaintext %}
ans =
     6
ans =
        29453
{% endhighlight %}
<p>Hereby <code class="language-plaintext highlighter-rouge">numPixel</code> refers to the number of pixels that belong to a certain grain while <code class="language-plaintext highlighter-rouge">area</code> represents the actual area measured in <code class="language-plaintext highlighter-rouge">(&micro;m)^2</code>. We may analyze the distribution of grains by grain area using a histogram.</p>
{% highlight matlab %}
close all
histogram(grains.area)
xlabel('grain area')
ylabel('number of grains')
{% endhighlight %}
<center>
{% include inline_image.html file="ShapeParameters_02.png" %}
</center>
<p>Note the large amount of very small grains. A more realistic histogram we obtain if we do not plot the number of grains at the y-axis but its total area. This can be achieved with the command <a href="grain2d.histogram.html"><code class="language-plaintext highlighter-rouge">histogram(grains)</code></a> or <a href="grain2d.hist.html"><code class="language-plaintext highlighter-rouge">hist(grains)</code></a>
</p>
{% highlight matlab %}
hist(grains)
{% endhighlight %}

{% highlight plaintext %}
ans =
      0.52941      0.80784      0.98039
ans =
      0.56078      0.73725      0.56078
ans =
       0.8549      0.64706      0.12549
{% endhighlight %}
<center>
{% include inline_image.html file="ShapeParameters_03.png" %}
</center>
{% highlight matlab %}
histogram(grains)
{% endhighlight %}
<center>
{% include inline_image.html file="ShapeParameters_04.png" %}
</center>
<p>Similarly as <code class="language-plaintext highlighter-rouge">numPixel</code> and <code class="language-plaintext highlighter-rouge">area</code>, the one-dimensional measures <code class="language-plaintext highlighter-rouge">boundarySize</code> and <code class="language-plaintext highlighter-rouge">perimeter</code> give the length of the grain boundary as number of segments and in <code class="language-plaintext highlighter-rouge">&micro;m</code>, respectively.</p>
{% highlight matlab %}
grains(9).boundarySize
grains(9).perimeter
{% endhighlight %}

{% highlight plaintext %}
ans =
    20
ans =
       876.22
{% endhighlight %}
<p>We may compute these quantities also explicitly from the grain boundary segments. In the following code the first command returns simply the number of boundary segments while the second one gives the total length of the boundary by summing up the length of each individual boundary segment</p>
{% highlight matlab %}
length(grains(9).boundary)
sum(grains(9).boundary.segLength)
{% endhighlight %}

{% highlight plaintext %}
ans =
    20
ans =
       876.22
{% endhighlight %}
<h2 id="9">Radius, diameter, equivalent radius, equivalent perimeter and shape factor</h2>
<p>Another, one dimensional measure is the <code class="language-plaintext highlighter-rouge">diameter</code> which refers to the longest distance between any two boundary points and is given im <code class="language-plaintext highlighter-rouge">&micro;m</code> as well</p>
{% highlight matlab %}
grains(9).diameter
{% endhighlight %}

{% highlight plaintext %}
ans =
       412.31
{% endhighlight %}
<p>The diameter is a special case of the caliper or Feret diameter of a grain that is explained in detail in the section <a href="ProjectionBasedParameters.html">Projection based parameters</a>.</p>
<p>In contrast the <a href="grain2d.equivalentRadius.html">equivalent radius</a> is the radius of a circle with the same area as the grain. Naturally, the equivalent radius is always smaller than the actual radius of the grains. Similarly, the <a href="grain2d.equivalentPerimeter">equivalent perimeter</a> is defined as the perimeter of the circle the same area and is always smaller then the actual perimeter.</p>
{% highlight matlab %}
2*grains(9).equivalentRadius

grains(9).equivalentPerimeter
{% endhighlight %}

{% highlight plaintext %}
ans =
       193.65
ans =
       608.37
{% endhighlight %}
<p>As a consequence, the ratio between between actual grain perimeter and the equivalent perimeter, the so called shape factor, is always larger then 1. The <a href="grain2d.shapeFactor.html"><code class="language-plaintext highlighter-rouge">shapeFactor</code></a> and measures how different a certain shape is from a circle.</p>
{% highlight matlab %}
plot(grains,grains.shapeFactor)
mtexColorbar('title','shape factor')
{% endhighlight %}
<center>
{% include inline_image.html file="ShapeParameters_05.png" %}
</center>
<p>A second measure for the discrepancy between the actual shape and a circle is the relative difference between the <a href="grain2d.perimeter.html"><code class="language-plaintext highlighter-rouge">perimeter</code></a> and the <a href="grain2d.equivalentPerimeter.html"><code class="language-plaintext highlighter-rouge">equivalentPerimeter</code></a>
</p>
{% highlight matlab %}
plot(grains,(grains.perimeter - grains.equivalentPerimeter)./grains.perimeter)
setColorRange([0,0.5])
mtexColorbar
{% endhighlight %}
<center>
{% include inline_image.html file="ShapeParameters_06.png" %}
</center>
<p>In this plot round shapes will have values close to zero while concave shapes will get values up to \(0.5\).</p>
<p>A third measure is the <a href="grain2d.paris.html"><code class="language-plaintext highlighter-rouge">paris</code></a> which stands for Percentile Average Relative Indented Surface and gives the relative difference between the actual perimeter and the perimeter of the convex hull. It is explained in more detail in the section <a href="HullBasedParameters.html">convex hull parameters.</a>
</p>
{% highlight matlab %}
plot(grains,grains.paris)
mtexColorbar('title','paris')
{% endhighlight %}
<center>
{% include inline_image.html file="ShapeParameters_07.png" %}
</center>
<h2 id="14">Fractal Dimension</h2>
<p>The fractal dimension of grain boundaries has been used to characterize the conditions of dynamical recrystallization. One way to define the fractal dimension of grain boundaries is to look at the slope of the perimeter as a function of the <a href="grain2d.equivalentRadius.html">equivalent radius</a> of the grains. More precisely, we consider this relationship in a log log plot and fit a linear model.</p>
{% highlight matlab %}
% consider the entire data set
mtexdata forsterite silent

% reconstruct grains
grains = calcGrains(ebsd('indexed'));

% smooth them
grains = smooth(grains,5);

close all
scatter(grains.equivalentRadius,grains.perimeter)
xlabel('equivalent radius')
ylabel('perimeter')

% set axes to logarithmic
logAxis(gca, [10,10^4],[10^2,10^5])

% fit a linear function in log space
ab = polyfit(log(grains.equivalentRadius),log(grains.perimeter),1);

% plot it
hold on
plot([10,10^4],exp(ab(2) + ab(1) * log([10,10^4])),'LineWidth',3)
hold off
{% endhighlight %}
<center>
{% include inline_image.html file="ShapeParameters_08.png" %}
</center>
<p>The slope of the linear function is the fractal dimension.</p>
{% highlight matlab %}
fractalDimension = ab(1)
{% endhighlight %}

{% highlight plaintext %}
fractalDimension =
        1.033
{% endhighlight %}
<p>It is important to understand that the fractal dimension computed this way heavily depends on the smoothing applied to the grain boundaries.</p>
</div>
</body>
</html>
